<% content_for(:page_header) do %>
  <%= "List of IoT Data" %>
<% end %>
<% content_for :panel_heading do %>Content<% end %>
<p id="notice"><%= notice %></p>

<!-- <h1>Listing Iot Data</h1> -->

<table id="iottt" class="display table" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th>WB No</th>
      <th>Part No</th>
      <th>Target</th>
      <th>Lot size</th>
      <th>Emp. Name</th>
      <th>Emp.ID</th>
      <th>Shift</th>
      <th>Device</th>
      <th>Count</th>
      <th>Status</th>
      <th>Actions</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @iot_data.each do |iot_datum| %>
      <tr>
        <td><%= iot_datum.workbench_number %></td>
        <td><%= iot_datum.part_number %></td>
        <td><%= iot_datum.target %></td>
        <td><%= iot_datum.lot_size %></td>
        <td><%= iot_datum.employee_name %></td>
        <td><%= iot_datum.employee_id %></td>
        <td><%= iot_datum.shift %></td>
        <td><%= iot_datum.device_id %></td>
        <td style="color:#007bb6;font-weight: bold;" id="ct"><%= iot_datum.count %></td>
        <td><%= iot_datum.status %></td>
        <td class="action-buttons">
          <% if iot_datum.status == 'Processing' || iot_datum.status == 'YTS' %>
          <%= link_to 'Start Process', iot_datum_process_start_path(iot_datum), class: 'btn btn-success'%>
          <% elsif iot_datum.status == 'Process Completed' %>  
          <%= link_to 'Process Completed', '', class: 'btn btn-danger' %>
          <% end %>        
          <%#= link_to 'Edit', edit_iot_datum_path(iot_datum), class: 'btn btn-primary' %>
          <%#= link_to 'Destroy', iot_datum, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%#= link_to 'New IoT data', new_iot_datum_path %>

<% content_for(:extra_scripts) do %>
  
  <script type="text/javascript">
    // function update(){ 
    //     $.get('/', function(data) {
    //       $('#ct').load(true);
    //       console.log('Test');
    //     });
    // }
    $(document).ready(function() {
      $('#iottt').DataTable({ responsive: true });
      setInterval('window.location.reload()', 5000);
      // window.setInterval('update()', 3*1000);
    });
  </script>
<% end %>

