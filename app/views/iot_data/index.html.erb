<% content_for(:page_header) do %>
  <%= "List of IoT Data" %>
<% end %>
<% content_for :panel_heading do %>Content<% end %>
<p id="notice"><%= notice %></p>

<!-- <h1>Listing Iot Data</h1> -->

<table id="iot" class="display table" cellspacing="0" width="90%">
  <thead>
    <tr>
      <th>Workbench number</th>
      <th>Part number</th>
      <th>Target</th>
      <th>Lot size</th>
      <th>Employee name</th>
      <th>Employee</th>
      <th>Shift</th>
      <th>Device</th>
      <th>Count</th>
      <th>Status</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @iot_data.each do |iot_datum| %>
    <%#= iot_datum.inspect %>
      <tr>
        <td><%= iot_datum.workbench_number %></td>
        <td><%= iot_datum.part_number %></td>
        <td><%= iot_datum.target %></td>
        <td><%= iot_datum.lot_size %></td>
        <td><%= iot_datum.employee_name %></td>
        <td><%= iot_datum.employee_id %></td>
        <td><%= iot_datum.shift %></td>
        <td><%= iot_datum.device_id %></td>
        <b><td style="color:#007bb6;font-weight: bold;"><%= iot_datum.count %></td></b>
        <td><%= iot_datum.status %></td>
        <td class="action-buttons">
          <% if iot_datum.status == 'Processing' || iot_datum.status == 'Yet to Start' %>
          <%= link_to 'Start Process', iot_datum_process_start_path(iot_datum), class: 'btn btn-success' %>
          <% elsif iot_datum.status == 'Process Completed' %>  
          <%= link_to 'Process Completed', '', class: 'btn btn-danger' %>
          <% end %>        <%#= link_to 'Edit', edit_iot_datum_path(iot_datum), class: 'btn btn-primary' %>
          <%#= link_to 'Destroy', iot_datum, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<!-- <h2>Import Data</h2>

<%#= form_tag import_iot_data_path, multipart: true do %>
  <%#= file_field_tag :file %>
  <%#= submit_tag "Import", class: 'btn btn-success' %>
<%# end %>

<br>

<p>
  Download:
  <%#= link_to "Excel", iot_data_path(format: "xls") %>
  <%#= link_to "Download Template", iot_data_path(format: "csv") %>
</p> -->

<%#= link_to 'New IoT data', new_iot_datum_path %>

<% content_for(:extra_scripts) do %>
  
  <script type="text/javascript">
    $(document).ready(function() {
      $('#iot').DataTable({ responsive: true });
    });
  </script>
<% end %>

<!-- <script type="text/javascript">
    jQuery(document).ready(function() {
      // $('#iot').DataTable({ responsive: true });
        done();
        alert('hi');
    });

  function done() {
    setTimeout( function() { 
      // $("#iot").load(location.href + " #demo");
      console.log('hi');
    done();//call done() again
  }, 2000)};//refresh it accordingly

  </script> -->
